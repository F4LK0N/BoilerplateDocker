#!/bin/sh
set -e

echo_h1 CONTAINER - SETUP;
if [[ -f "/run/container/setup-done" ]]; then
    echo "[===]";
else
    fsSetup_echoHeader h2;
    
    fsSetup_clearErros;
    
    
    fsSetup 777 root root /tmp/tst/dir1/a;

    #if [[ "$( fsSetup_has-error )" == "1" ]]; then
    #    echo "ERROR"; fsSetup_clear-error; exit 1;
    #fi;
    # Container
    fsSetup 777 root root /run/container/ TRUNCATE;
    fsSetup 777 root root ${ROOT_DATA}/;
    fsSetup 777 root root ${ROOT_LOGS}/;
    # OS
    fsSetup 777 root root ${OS_DATA}/;
    fsSetup 777 root root ${OS_LOGS}/;
    # App
    fsSetup 777 root root ${APP_ROOT}/;
    # Container
    fsSetup 777 root root /run/container/setup-done;

    if [ $(fsSetup_hasErrors) == '1'  ]; then
        echo "[ERROR]";
        exit 1;
    else
        echo "[DONE]";
    fi
fi
